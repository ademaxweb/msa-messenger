syntax = "proto3";

package github.com.ademaxweb.msa_messenger.users.api.users.v1;

option go_package = "pkg/api/users;users";

// USER MODEL
message UserProfile {
  // Уникальный идентификатор пользователя
  uint32 user_id = 1;
  // Отображаемое имя пользователя
  string nickname = 2;
  // Поле "О пользователе", статус пользователя
  string bio = 3;
  // Ссылка на PFP
  string avatar_url = 4;
}


message Pagination {
  uint32 limit = 1;
  optional uint32 cursor = 2;
  optional uint32 next_cursor = 3;
}

// CREATE USER
message CreateProfileRequest {
  // Уникальный идентификтор пользователя ??? [По идеи ID генерируется сервисом, а не получается на вход...]
  uint32 user_id = 1;
  // Отображаемое имя пользователя
  string nickname = 2;
  // Поле "О пользователе", статус пользователя
  optional string bio = 3;
  // Ссылка на PFP
  optional string avatar_url = 4;
}

message CreateProfileResponse {
  UserProfile user_profile = 1;
}


// UPDATE USER
message UpdateProfileRequest {
  // Уникальный идентификтор пользователя ??? [По идеи ID генерируется сервисом, а не получается на вход...]
  uint32 user_id = 1;
  // Отображаемое имя пользователя
  optional string nickname = 2;
  // Поле "О пользователе", статус пользователя
  optional string bio = 3;
  // Ссылка на PFP
  optional string avatar_url = 4;
}

message UpdateProfileResponse {
  UserProfile user_profile = 1;
}


// GET USER BY ID
message GetProfileByIDRequest {
  // Уникальный идентификтор пользователя ??? [По идеи ID генерируется сервисом, а не получается на вход...]
  uint32 id = 1;
}

message GetProfileByIDResponse {
  UserProfile user_profile = 1;
}


// GET USER BY NICKNAME
message GetProfileByNicknameRequest {
  // Отображаемое имя пользователя
  string nickname = 1;
}

message GetProfileByNicknameResponse {
  UserProfile user_profile = 1;
}


// SEARCH USER BY NICKNAME
message SearchProfileByNicknameRequest {
  // Строка поискового запроса (Отображаемое имя пользователя)
  string query = 1;
  Pagination pagination = 2;
}

message SearchProfileByNicknameResponse {
  repeated UserProfile results = 1;
  Pagination pagination = 2;
}